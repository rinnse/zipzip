<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
   <!-- í—¤ë” ì‹œì‘ -->
   <div th:replace="/common/header :: header"></div>
   <!-- í—¤ë” ë -->

   <!-- ê°œë³„ css -->
<!--    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->
   <style type="text/css">
      .board-Page-container {
         display: flex;
         position: relative;
         justify-content: center;
         align-items: center;
         min-height: 565px;
         width: 100%;
      }
      .board-container {
         display: flex;
         position: relative;
         justify-content: center;
         align-items: center;
         min-height: 500px;
         width:96%;
         border-radius: 10px;
         margin-bottom: 1.5%;
         background-color: #fffff;
          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.05);
         margin-top:-8px;
      }

      .board-content-container {
         display: flex;
         position: relative;
         justify-content: center;
         align-items: center;
         height: 50%;
         width: 70%;
         margin-top: 50px;
         margin-bottom: 30px;
         flex-direction: column;
         box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
         /* ê·¸ë¦¼ì ì¶”ê°€ */
      }
      
      .list-container {
          display: flex;
          justify-content: center; /* ìì‹ ìš”ì†Œë¥¼ ê°€ë¡œ(ìˆ˜í‰) ê¸°ì¤€ìœ¼ë¡œ ê°€ìš´ë° ì •ë ¬ */
      }

      label {
         font-weight: bold;
      }

      input[type="text"] {
         width: 100%;
         padding: 8px;
         margin-top: 5px;
         margin-bottom: 10px;
         border: 1px solid #ccc;
         border-radius: 3px;
      }

      input[type="text"]:focus {
         outline: none;
         /* í¬ì»¤ìŠ¤ ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ëŠ” í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ ì œê±° */
      }


      /* urlë³µì‚¬, ìˆ˜ì •ë²„íŠ¼ í¬í•¨ */
      .button-container {
         display: grid;
/*          margin-top: 7%; */
/*          align-items: flex-start; */
         justify-content: flex-end; /* ìì‹ ìš”ì†Œë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì •ë ¬ */
           align-items: center; /* ìˆ˜ì§ ì •ë ¬ */
      }

      .share-container {
          display: flex;
          justify-content: space-between; /* ìì‹ ìš”ì†Œë¥¼ ìˆ˜í‰ìœ¼ë¡œ ê°€ìš´ë° ì •ë ¬í•˜ê³  ê°„ê²©ì„ ë¶„ì‚° */
          align-items: center; /* ìì‹ ìš”ì†Œë¥¼ ìˆ˜ì§ìœ¼ë¡œ ê°€ìš´ë° ì •ë ¬ */
          margin-left:auto;
      }
      
      .button-container2 {
          display: flex; /* Flexboxë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë¡œ ì •ë ¬ */
          justify-content: space-between; /* ìì‹ ìš”ì†Œ ì‚¬ì´ì˜ ê°„ê²©ì„ ê· ë“±í•˜ê²Œ ë°°ì¹˜ */
      }

      .btn-rewrite {
         display: flex; /* ë‚´ë¶€ ìš”ì†Œë“¤ì„ ê°€ë¡œë¡œ ì •ë ¬í•˜ê¸° ìœ„í•´ flexbox ì‚¬ìš© */
          justify-content: center; /* ë‚´ë¶€ ìš”ì†Œë“¤ ê°€ë¡œ ì •ë ¬ ì¤‘ì•™ ì •ë ¬ */
          align-items: center; /* ë‚´ë¶€ ìš”ì†Œë“¤ ì„¸ë¡œ ì •ë ¬ ì¤‘ì•™ ì •ë ¬ */
         background-color: gray;
         color: white;
         padding: 5px 10px;
         border: none;
         border-radius: 5px;
         cursor: pointer;
         margin-top: 30px;
         margin-left: 5px;
         white-space: nowrap; /* í…ìŠ¤íŠ¸ê°€ í•œ ì¤„ë¡œ ì¤„ë°”ê¿ˆë˜ì§€ ì•Šë„ë¡ ì„¤ì • */
      }
      
      .btn-rewrite:hover {
      background-color: #555;
      transform: translateY(-2px);
      cursor: pointer;
      }

      .url-copy {
         /* margin-bottom:10px; */
         width: 20px;
         height: auto;
         cursor: pointer;
      }

      .info-container {
         display: flex;
         /*justify-content: space-between; */
         justify-content: center;
         align-items: center;
         /* ìì‹ ìš”ì†Œë¥¼ ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
         width: 77.4%;

      }

      .info-container1 {
         display: flex;
         align-items: left;/* ìì‹ ìš”ì†Œë¥¼ ìˆ˜ì§ ê°€ìš´ë° ì •ë ¬ */
         flex-direction: column;/* ìì‹ ìš”ì†Œë¥¼ ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ë°°ì¹˜ */
         width: 100%;
/*          margin-top: 7%; */

      }

      .info-container1-1 {
         display: flex;
         align-items: center;
         width: 80%;
         margin-top: 5px;
         margin-bottom: 5px;
      }

      .info-container label {
         display: flex;
         text-align: center;
         align-items: center;
         margin-right: 10px;
         margin-bottom: 0px;
         color:#666666;
      }


      button[type="submit"]:hover {
         background-color: #0056b3;
      }

      /* textarea css */
      .textarea-css {
         box-sizing: border-box;
         min-height: 100%;
         width: 77.4%;
         resize: none;
         border: 1px solid #ccc;
         outline: none;
         overflow-y: auto;
      }

      .textarea-title {
         font-weight: bold;
         padding: 10px;
         background-color: lightgray;
      }

      /* hr ìš”ì†Œ ìŠ¤íƒ€ì¼ */
      hr {
         width: 90%;
         border: none;
         border-top: 2px solid #333;
         /* ì§„í•œ ê·¸ë ˆì´ ìƒ‰ìƒ ì„¤ì • */
         margin: 20px auto;
         /* ê°€ìš´ë° ì •ë ¬ì„ ìœ„í•œ ë§ˆì§„ ì„¤ì • */
      }

      /* ëŒ“ê¸€ */
      .comment-container {

         width: 77.4%;
         justify-content: center;
         flex-direction: column;
         margin-bottom: 30px;
         padding-top: 20px;
         border: 1px solid lightgray;
      }

      .comment {
         /*     border: 1px solid #ccc; */
         padding: 15px;
         /*     margin-bottom: 10px; */
         margin-top: -15px;
      }
      
      .nocomment {
         padding: 15px;
         display: flex;
          justify-content: center; /* ê°€ë¡œ ë°©í–¥ ê°€ìš´ë° ì •ë ¬ */
          align-items: center; /* ì„¸ë¡œ ë°©í–¥ ê°€ìš´ë° ì •ë ¬ */
      }

      .comment::after {
         content: "";
         display: block;
         width: 100%;
         height: 1px;
         background-color: lightgray;
         /* ì„ ì˜ ìƒ‰ìƒ ì„¤ì • */
         /*     margin-bottom: 5px; /* ì„  ì•„ë˜ìª½ ì—¬ë°± ì„¤ì • */
         */
      }

      .comment-reply {
         margin-left: 30px;
         padding-left: 10px;
         padding-bottom: 10px;
          display: flex; /* ìì‹ ìš”ì†Œë“¤ì„ ê°€ë¡œë¡œ ì •ë ¬í•˜ê¸° ìœ„í•´ Flexbox ì‚¬ìš© */
          align-items: center; /* ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬ */
      }
      
      .left-2 {
         margin-bottom:30px;
         margin-right:10px;
         width: 20px;
         height: auto;
      }
      
      .comment-reply1 {
         width: 95%;
         border-left: 1px solid #ccc;
         padding-left: 10px;
         height: auto;
/*           min-height: 60px; */
      }
      .comment-reply1::after {
         content: "";
         display: block;
         width: 96%;
         height: 1px;
         background-color: lightgray;
         /* ì„ ì˜ ìƒ‰ìƒ ì„¤ì • */
         /*     margin-bottom: 5px; /* ì„  ì•„ë˜ìª½ ì—¬ë°± ì„¤ì • */
         */
      }

      .comment-info {
         font-size: 11px;
      }
      
      .comment-delete {
         width:20px;
         float:right;
         margin-right:20px;
         cursor:pointer;"  
      }
      .recomment-delete {
         width:20px;
          float:right;
          margin-right:px;
          cursor:pointer;" 
      }

      .comment-content {
         margin-top: 10px;
         margin-bottom: 10px;
         white-space: normal;
/*          overflow-wrap: anywhere; */
         overflow-wrap: break-word;
         word-break: break-all;
         width:90%;
      }

      .comment-button-container {
         display: flex;
         position: relative;
         justify-content: center;
         /*     align-items: center; */
         margin-bottom: 25px;
      }

      .comment-input {
         width: 80%;
         height: 80px;
         margin-right: 5px;
         border-radius: 5px;
         border: 1px solid #ccc;
         outline: none;
      }

      .btn-commentWrite {
         background-color: gray;
         color: white;
         padding: 7px 12px;
         border: none;
         border-radius: 5px;
         cursor: pointer;
      }
      
      .btn-commentWrite:hover {
         background-color: #555;
         transform: translateY(-2px);
         cursor: pointer;
      }

      .comment-hr {
         width: 98%;
         border: none;
         border-top: 2px solid #333;
         /* ì§„í•œ ê·¸ë ˆì´ ìƒ‰ìƒ ì„¤ì • */
         margin: 20px auto;
         /* ê°€ìš´ë° ì •ë ¬ì„ ìœ„í•œ ë§ˆì§„ ì„¤ì • */
      }
      
      .fixed-bottom-right {
           position: fixed; 
           bottom: 8px;
           right: 38px;
           background-color: none;
           padding: 5px;
/*            border: 1px solid #ccc; /* í…Œë‘ë¦¬ ì„¤ì • */ */
           border-radius: 5px;
           z-index: 1000; 
           width:80px;
           cursor:pointer;
       }
      .auto-scroll {
         position: fixed;
           top: 20px;
           right: 55px;
           background-color: none;
           padding: 5px;
           border: 2px solid #ccc;
           border-radius: 5px;
           z-index: 1000;
/*            font-weight:bold; */
      }
      .comment-scroll {
         position: fixed;
           bottom: 30px;
           right: 120px;
           background-color: none;
           padding: 5px; 
           border: 2px solid #ccc;
           border-radius: 5px;
           z-index: 1000;
      }

   </style>

</head>

<body>
   <!-- ë„¤ë¹„ ì‹œì‘ -->
   <div th:replace="/common/nav :: nav"></div>
   <!-- ë„¤ë¹„ ë -->

   <!-- ë³¸ë¬¸ ì‹œì‘ -->
   <div style="height: 13vh;"></div>

   <div class="board-Page-container" >
      <div class="board-container">
         <!-- ê²Œì‹œíŒ ì „ì²´ ë‚´ìš© div -->
         <div class="board-content-container" th:if="${commu != null}">
            <br /><br />
            <div class="list-container">
               <div onclick="fn_freeBoareList()" style="cursor:pointer;font-weight:bold;font-size:20px;color:#666666;">ëŒì•„ê°€ê¸° ğŸ‘ˆ</div>
            </div>
            
            <hr>
            
            <div class="info-container">
               <div class="info-container1">
                  <div class="info-container1-1">
                     <label for="author">ì‘ì„±ì ğŸ˜Š -</label>
                     <span th:text="${commu.userId} != null ? ${commu.userId} : ${commu.agentId}">ì‘ì„±ìê°’</span>
                  </div>
                  <div class="info-container1-1">
                     <label for="date">ë“±ë¡ì¼ ğŸ“Œ -</label>
                     <span th:text="${commu.regDate}">ë“±ë¡ì¼ê°’</span>
                  </div>
                  <div class="info-container1-1">
                     <label for="views">ì¡°íšŒìˆ˜ ğŸ‘€ -</label>
                     <span th:text="${commu.readCnt}">ì¡°íšŒìˆ˜ê°’</span>
                  </div>
               </div>

               <div class="button-container">
                  <div class="share-container">
                     <img src="/resources/images/icons8-copy-48.png" class="url-copy" th:onclick="fn_urlCopy()">&nbsp;&nbsp;
<!--                      <img src="/resources/images/icons8-share-24.png" class="url-copy"> -->
                  </div>
                  <div class="button-container2" th:if="${me == 'Y'}">  <!-- ë¡œê·¸ì¸í•œ ì•„ì´ë””ì™€ ì‘ì„±ìê°€ ê°™ì„ê²½ìš°ë§Œ ë³´ì—¬ì£¼ê¸° ?  -->
                     <button class="btn-rewrite" id="btnDelete" >ì‚­ì œ ğŸ”¥</button>
                     <button class="btn-rewrite" id="btnUpdate">ìˆ˜ì • ğŸ“</button>
                  </div>
               </div>
            </div>



            <hr>
            <div class="textarea-css">
               <div class="textarea-title" th:text="${commu.communityTitle}">ì œëª©</div>
               <div id="readEditor" >ë‚´ìš©</div>
<!--                <textarea id="editor" class="textarea-css"></textarea> -->
               <script src="/resources/js/ckeditor/build/ckeditor.js"></script>
               <script>

                  // í™”ë©´ ì—°ê²°
                  ClassicEditor
                     .create(document.querySelector('#readEditor'), {
                     })
                     .then(editor => {
                        window.editor = editor;
                        editor.enableReadOnlyMode( 'editor' );
                        
                        const toolbarElement = editor.ui.view.toolbar.element;
                        toolbarElement.style.display = 'none';
                        
                        var strContent = '[(${commu.communityContent})]';      //CKEDITOR.instances.editor.setData('<p>' + strContent + '</p>');
                        editor.setData('<p>' + strContent + '</p>');
                        
                        console.log('Editor was initialized', editor);
                     })
                     .catch(error => {
                        console.error('There was a problem initializing the editor -- ', error);
                     });


               </script>
            </div><br>
            
            
            <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
<!--                <span>ì¶”ì²œ</span>/<span>ë¹„ì¶”ì²œ</span>  -->
               <!-- ì¶”ì²œ -->
               <div style="display: flex;flex-direction: column;align-items: center;">
                  <img id="likeImg" alt="" src="/resources/images/icons8-thumb-up-48 (Gary).png" style="display:block;cursor:pointer;" th:onclick="fn_like()" > <!-- th:onclick="fn_like()" -->
                  <span id="likeTotalCnt" th:text="${likeTotalCnt}"></span> <!-- th:text="${likeTotalCnt}" -->
               </div>
               <!-- ë¹„ì¶”ì²œ -->
<!--                <div style="display: flex;flex-direction: column;align-items: center;"> -->
<!--                   <img id="hateImg" alt="" src="/resources/images/icons8-thumb-down-48 (Gary).png" style="cursor:pointer;" th:onclick="fn_hate()"> -->
<!--                   <span id="likeTotalCnt">2</span> th:text="${likeTotalCnt}" -->
<!--                </div> -->
            </div>

            <hr>
         
         <br />
            <b style="font-size:20px;color:#666666;">ëŒ“ê¸€ ëª©ë¡ ğŸ“œ</b><br/><br />
            <div class="comment-container">
               <th:block th:if="${list != null}" th:each="list : ${list}">
                  <div class="comment" th:if="${list.commentDepth == 0 and list.isDeleted == 1}">
                     <div>
                        <b th:text="${list.userId}">ì‘ì„±ìID</b> 
                        <span class="comment-info" th:text="${list.regDate}">2024.04.29 06:14 </span>&nbsp;
                        <span class="comment-info" style="cursor:pointer;"  th:onclick="fn_comment([[${list.commentGroup}]], [[${list.userId}]], [[${list.commentContent}]])">ë‹µê¸€</span>
                        <img src="/resources/images/icons8-delete-64.png" class="comment-delete" th:if="${list.userId != null and user != null and list.userId == user.userId}" th:onclick="'fn_commentDelete(' + ${list.communityNum} + ',' + ${list.commentNum} + ')'"><!-- ì‚­ì œ</span> -->
                     </div>
                     <div class="comment-content" th:text="${list.commentContent}">ëŒ“ê¸€ ë‚´ìš©...</div>
                  </div>
                  <div class="comment" th:if="${list.commentDepth == 0 and list.isDeleted == 0}">
                     <div style="margin-top:15px;margin-bottom:15px;">ì‚­ì œëœ ëŒ“ê¸€ì…ë‹ˆë‹¤.</div>
                  </div>
                  
                  <div class="comment-reply" th:if="${list.commentDepth == 1 and list.isDeleted == 1}">
                     <div>
                        <img src="/resources/images/icons8-left-2-32.png" class="left-2">
                     </div>
                     <div class="comment-reply1">
                        <div style="width:90%;">
                           <b th:text="${list.userId}">ì‘ì„±ìID</b> 
                           <span class="comment-info">2024.04.29 06:14 </span>&nbsp;
                           <img src="/resources/images/icons8-delete-64.png" class="recomment-delete" th:if="${list.userId != null and user != null and list.userId == user.userId}" th:onclick="'fn_commentDelete(' + ${list.communityNum} + ',' + ${list.commentNum} + ')'">
                        </div>
                        <div class="comment-content" th:text="${list.commentContent}">ëŒ“ê¸€ ë‚´ìš©...</div>
                     </div>
                  </div>
                  <div class="comment-reply" th:if="${list.commentDepth == 1 and list.isDeleted == 0}">
                     <div>
                        <img src="/resources/images/icons8-left-2-32.png" class="left-2">
                     </div>
                     <div class="comment-reply1"><div style="margin-top:15px;margin-bottom:15px;">ì‚­ì œëœ ëŒ“ê¸€ì…ë‹ˆë‹¤.</div></div>
                  </div>
               </th:block>
               
               <th:block th:if="${list == null or list.isEmpty()}">
                  <div class="nocomment">
                     <b style="margin-top:20px;">ëŒ“ê¸€ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</b>
                  </div>
               </th:block>
               
               <!-- ëŒ“ê¸€ ì‘ì„± -->
               <hr class="comment-hr">
               <div style="display: flex; justify-content: space-between;">
                  <span id="commentInfo" name="commentInfo" style="margin-left:80px;"></span>
                  <span id="x" th:onclick="fn_groupCancel()" style=" cursor:pointer; margin-right:15%;">x</span>
               </div>
               <div class="comment-button-container">
                  <input class="comment-input" id="commentContent" name="commentContent">
                  <button class="btn-commentWrite" id="btnCommentWrite" onclick="fn_commentProc()">ë“±ë¡</button>
               </div>
               <form id="freeBoardForm" name="freeBoardForm" method="post">
                  <input type="hidden" id="communityNum" name="communityNum" th:value="${communityNum}" />
                  <input type="hidden" id="curPage" name="curPage" th:value="${curPage}" />
                  <input type="hidden" id="searchType" name="searchType" th:value="${searchType}" />
                  <input type="hidden" id="searchValue" name="searchValue" th:value="${searchValue}" />
                  <input type="hidden" id="sort" name="sort" th:value="${sort}" />
               </form>
               <input type="hidden" id="commentGroup" name="commentGroup" value="" />
               <input type="hidden" id="loginId" name="loginId" th:if="${user != null}" th:value="${user.userId}">
            </div>
         
         <!-- ìë™ ìŠ¤í¬ë¡¤ ë‚´ë¦¬ê¸° -->
         <div class="auto-scroll">
            <span id="autoScroll" style="cursor:pointer;">ìë™ ìŠ¤í¬ë¡¤ ë‚´ë¦¬ê¸°âœ¨ </span>|
            <span id="autoScrollStop" style="cursor:pointer;">ì¼ì‹œì •ì§€ğŸŒµ</span>
         </div>
         
         <div class="comment-scroll">
            <span id="comment-scroll" style="cursor:pointer;">ëŒ“ê¸€ë³´ê¸°ğŸ” </span>|
            <span id="commentwrite-scroll" style="cursor:pointer;"> ëŒ“ê¸€ì“°ê¸°âœ</span>
         </div>
         
         
         <!-- ë§¨ìœ„ë¡œ -->
         <div class='fixed-bottom-right'>
            <img id="btnTop" style="display:none;margin-bottom:10px;margin-left:10px;" src="/resources/images/icons8-top-48.png" />
         </div>
         
         </div>
         <!-- ê²Œì‹œíŒ ì „ì²´ ë‚´ìš© div ë -->
      </div>
   </div>
   <!-- ë³¸ë¬¸ ë -->

   <!-- í‘¸í„° ì‹œì‘ -->
   <footer th:replace="/common/footer :: footer"></footer>
   <!-- í‘¸í„° ë -->

   <!-- ê°œë³„ js -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script type="text/javascript">

   $(document).ready(function() {
      
//       alert([[${commu}]]);
      
      if('[[${commu}]]' == 'null' || '[[${commu}]]' == ''){
         alert("í•´ë‹¹ ê²Œì‹œê¸€ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
         location.href = "/board/freeBoard";
      }
      
      //$("#likeTotalCnt").text([[${likeTotalCnt}]]);
      document.getElementById("x").style.display = "none";
      
      //ë¡œë”©ì‹œ ì¶”ì²œ src ì„¤ì •
      if('[[${likeDone}]]' == 'Y'){
         $("#likeImg").attr('src', '/resources/images/icons8-thumb-up-48 (Green).png');
      }
      
      //ëŒ“ê¸€ë³´ê¸°/ ëŒ“ê¸€ì“°ê¸° ì´ë™
      $("#comment-scroll").on("click", function(){
         var commentLo = $("#likeImg").offset();
         $("html, body").animate({scrollTop: commentLo.top},400);
      });
      $("#commentwrite-scroll").on("click", function(){
         var commentWriteLo = $(".comment-hr").offset();
         $("html, body").animate({scrollTop: commentWriteLo.top},400);
         $("#commentContent").focus();
      });
      
      
      //ë§¨ìœ„ë¡œ ë²„íŠ¼ display
      const btnTop = document.querySelector('#btnTop');
      
       window.addEventListener('scroll', function() {
           let scrollY = window.scrollY || document.documentElement.scrollTop;
        
           if (scrollY === 0) {
               btnTop.style.display = 'none'; // ë§¨ ìœ„ì— ìˆì„ ë•Œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
           } else {
               btnTop.style.display = 'block'; // ë§¨ ìœ„ì— ìˆì§€ ì•Šì„ ë•Œ ë²„íŠ¼ í‘œì‹œ
           }
       });
      
       // ë§¨ ìœ„ë¡œ jQuery
       $("#btnTop").on("click", function(){
          //$('html, body').animate({ scrollTop: 0 }, 'slow'); //ì²œì²œíˆ ì• ë‹ˆë©”ì´ì…˜
          //$('html, body').scrollTop( $(document).height() ); //ë§¨ì•„ë˜ë¡œ ì´ë™
          $('html, body').scrollTop(0);
       });
       

       //ìë™ìŠ¤í¬ë¡¤ js
      let btnAutoScroll = document.querySelector('#autoScroll');
      let btnAutoScrollStop = document.querySelector('#autoScrollStop');
      let autoScrollTimeout;
      let animationFrameId;
      
      let what = true;
      
       const autoScroll = () => {
          let scrollLocation = window.scrollY;
          let windowHeight = window.innerHeight;
          let curScrollY = scrollLocation + windowHeight;  //í˜„ì¬ìŠ¤í¬ë¡¤ìœ„ì¹˜
          let documentH = document.documentElement.scrollHeight; //$(document).height(); //ì „ì²´ê¸¸ì´ ìœ„ì¹˜
          
          
          if(scrollLocation < documentH - windowHeight){
//              setTimeout(() => {
//                 window.scrollTo(0, curScrollY + 1);
//                 curScroll = window.scrollY;
//                 autoScroll();
//              }, 10);

            if(what){
                window.scrollTo(0, scrollLocation + 1);
                animationFrameId = requestAnimationFrame(autoScroll);   //ì• ë‹ˆë©”ì´ì…˜ì‹¤í–‰
//                  autoScrollTimeout = setTimeout(autoScroll, 10);   //ì‹œê°„ ì‹¤í–‰
            }else{
               what = true;
               cancelAnimationFrame(animationFrameId); // ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ ì·¨ì†Œ
//                return;
            }
             
          }
          else{
             alert("ê²Œì‹œë¬¼ ë³´ê¸°ê°€ ëë‚¬ìŠµë‹ˆë‹¤.");
             cancelAnimationFrame(animationFrameId); // ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ ì·¨ì†Œ
//              clearTimeout(autoScrollTimeout);      //ì• ë‹ˆë©”ì´ì…˜ì·¨ì†Œ
          }
          return;
       }
       
       const autoScrollStop = () => {
          what = false;
       }
       
       btnAutoScroll.addEventListener('click', autoScroll);
       btnAutoScrollStop.addEventListener('click', autoScrollStop);
       
      
       
      //-------------------------------------------------------------------------------
      //ê²Œì‹œê¸€ ì‚­ì œë²„íŠ¼ í´ë¦­ì‹œ
      $("#btnDelete").on("click", function(){
         //alert("ì‚­ì œ!");
         
         $("#btnDelete").prop("disabled", true);
         
         if('[[${user}]]' == 'null' || '[[${user}]]' == ''){
            alert("ì‚­ì œí•˜ì‹œë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            $("#btnDelete").prop("disabled", false);
            return;
         }
         
         if(confirm("ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") && confirm("ì‚­ì œëœ ê²Œì‹œë¬¼ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
            $.ajax({
               type:"POST",
               url:"/board/CommunityDeleteProc",
               data:{
                  communityNum:$("#communityNum").val()
               },
               datatype:"JSON",
               cache:false,
               beforeSend:function(xhr){
                  xhr.setRequestHeader("AJAX", "true");
               },
               success:function(res){
                  if(res == 200){
                      alert("ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                      $("#btnDelete").prop("disabled", false);
                      location.href = "/board/freeBoard";
//                       document.freeBoardForm.action = "/board/freeBoard";
//                      document.freeBoardForm.submit();
                  }
                  else if(res == -200){
                     alert("");
                     $("#btnDelete").prop("disabled", false);
                  }
                  else if(res == 404){
                     alert("ê²Œì‹œê¸€ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                     $("#btnDelete").prop("disabled", false);
                     location.href = "/board/freeBoard";
                  }
                  else{
                     alert("ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
                     $("#btnDelete").prop("disabled", false);
                     return;
                  }
               },
               error:function(error){
                  alert("ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
                  $("#btnDelete").prop("disabled", false);
               }
            });
         }else{
            $("#btnDelete").prop("disabled", false);
         }
         
      });
      
      
      //ìˆ˜ì •ë²„íŠ¼í´ë¦­ì‹œ
      $("#btnUpdate").on("click", function(){
         document.freeBoardForm.action="/board/freeBoardUpdate";
         document.freeBoardForm.submit();
      });
      
      
   });
   
   function fn_freeBoareList(){
      document.freeBoardForm.action = "/board/freeBoard";
      document.freeBoardForm.submit();
   }
   
   function fn_commentProc(commentGroup){
      $("#btnCommentWrite").prop("disabled", true);
   
      if($.trim($("#commentContent").val()).length <= 0){
         alert("ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
         $("#commentContent").val("");
         $("#commentContent").focus();;
      
         $("#btnCommentWrite").prop("disabled", false);
         return;
      }
      
      if('[[${user}]]' == 'null' || '[[${user}]]' == ''){
         alert("ëŒ“ê¸€ì„ ì‘ì„±í•˜ë ¤ë©´ íšŒì› ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
         $("#btnCommentWrite").prop("disabled", false);
         return;
      }
   
      //var formData = $("freeBoardForm").serialize();
   
      $.ajax({
         type:"POST",
         url:"/board/CommentWriteProc",
         data:{
            communityNum:$("#communityNum").val(),
            boardComment:$("#commentContent").val(),
            commentGroup:$("#commentGroup").val()
         },
         datatype:"JSON",
         cache:false,
         beforeSend:function(xhr){
            xhr.setRequestHeader("AJAX", "true");
         },
         success:function(res){
            if(res == 200){
               alert("ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
               document.freeBoardForm.action = "/board/freeBoardDetail";
               document.freeBoardForm.submit();
            }
            else if(res == 300){
               alert("íšŒì›ë§Œ ì‘ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.");
               $("#btnCommentWrite").prop("disabled", false);
            }
            else if(res == 400){
               alert("ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
               $("#commentContent").focus();
               $("#btnCommentWrite").prop("disabled", false);
            }
            else if(res == 404){
               alert("ê²Œì‹œê¸€ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
               document.freeBoardForm.action = "/board/freeBoard";
               document.freeBoardForm.submit();
//                location.href = "/board/freeBoard";
            }
            else{
               alert("ëŒ“ê¸€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
               $("#commentContent").focus();
               $("#btnCommentWrite").prop("disabled", false);
            }
         },
         error:function(error){
            alert("ëŒ“ê¸€ ë“±ë¡ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
            $("#btnCommentWrite").prop("disabled", false);
         }
      });      
   }
   
   //ë‹µê¸€ í´ë¦­ì‹œ
   function fn_comment(commentGroup, userId, commentContent){
//       alert("commentGroup - " + commentGroup);
//       alert("userId - " + userId);
//       alert("commentContent - " + commentContent);
      
      $("#commentGroup").val(commentGroup);
      
      var shortCommentContent = userId + ' - ' + commentContent.substring(0, 15) + ' .. ì— ëŒ€í•œ ë‹µê¸€';
      
      $("#commentInfo").text(shortCommentContent);
      document.getElementById("x").style.display = "block";
      
   }
   
   //xí´ë¦­ì‹œ
   function fn_groupCancel(){
      $("#commentGroup").val("");
      $("#commentInfo").text("");
      document.getElementById("x").style.display = "none";
   }
   
   //ëŒ“ê¸€ ì‚­ì œ
   function fn_commentDelete(communityNum, commentNum){
//       alert(commentNum);
//       alert(communityNum);
      
        if (confirm("ì •ë§ë¡œ ì´ ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
         $.ajax({
            type:"POST",
            url:"/board/CommentDeleteProc",
            data:{
               communityNum:communityNum,
               commentNum:commentNum
            },
            datatype:"JSON",
            cache:false,
            beforeSend:function(xhr){
               xhr.setRequestHeader("AJAX", "true");
            },
            success:function(res){
               if(res == 200){
                  alert("ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                  document.freeBoardForm.action = "/board/freeBoardDetail";
                  document.freeBoardForm.submit();
               }
               else if(res == 404){
                  alert("ê²Œì‹œê¸€ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                  document.freeBoardForm.action = "/board/freeBoard";
                  document.freeBoardForm.submit();
               }
               else if(res == 500){
                  alert("ëŒ“ê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
               }
               else{
                  alert("ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.");
                  document.freeBoardForm.action = "/board/freeBoardDetail";
                  document.freeBoardForm.submit();
               }
            },
            error:function(error){
               alert("ëŒ“ê¸€ ì‚­ì œ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
            }
         });      
        }
        
   }
   
   
    //ì¶”ì²œ í´ë¦­ì‹œ
    function fn_like(){
       
      if('[[${user}]]' == 'null' || '[[${user}]]' == ''){
         alert("ì¶”ì²œì€ íšŒì› ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
         $("#likeImg").attr('src', '/resources/images/icons8-thumb-up-48 (Gary).png');
         return;         
      }
      else{
          if($("#likeImg").attr('src') == '/resources/images/icons8-thumb-up-48 (Gary).png'){   //document.querySelector('img').src
             $("#likeImg").attr('src', '/resources/images/icons8-thumb-up-48 (Green).png');
             fn_likeProc();
          }
          else{
             $("#likeImg").attr('src', '/resources/images/icons8-thumb-up-48 (Gary).png');
             fn_likeProc();
          }
      }
    }
    
    //ì¶”ì²œ Proc í•¨ìˆ˜
    function fn_likeProc(){
       
      $.ajax({
         type:"POST",
         url:"/board/CommentLikeProc",
         data:{
            communityNum:$("#communityNum").val()
         },
         datatype:"JSON",
         cache:false,
         beforeSend:function(xhr){
            xhr.setRequestHeader("AJAX", "true");
         },
         success:function(res){
            if(res == 200){
//                alert("ì¶”ì²œ ì„±ê³µ");
               location.reload();
               $(window).scrollTop($('#likeImg').offset().top);
               //$("#likeTotalCnt").text([[${likeTotalCnt}]]);
            }
            else if(res == -200){
//                alert("ì¶”ì²œ ì² íšŒ");
               location.reload();
               //$("#likeTotalCnt").text([[${likeTotalCnt}]]);
            }
            else if(res == 404){
               alert("ê²Œì‹œê¸€ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
               document.freeBoardForm.action = "/board/freeBoard";
               document.freeBoardForm.submit();
            }
            else{
               alert("ì¶”ì²œ ì˜¤ë¥˜ code");
               return;
            }
         },
         error:function(error){
            alert("ì¶”ì²œ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.");
            //$("#likeImg").prop("disabled", false);
         }
      });      
    }
    
    //ë¹„ì¶”ì²œ í´ë¦­ì‹œ
    function fn_hate(){
      if('[[${user}]]' == 'null' || '[[${user}]]' == ''){
         alert("ë¹„ì¶”ì²œì€ íšŒì› ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
         $("#hateImg").attr('src', '/resources/images/icons8-thumb-down-48 (Gary).png');
         return;         
      }
      
       if($("#hateImg").attr('src') == '/resources/images/icons8-thumb-down-48 (Gary).png'){
          $("#hateImg").attr('src', '/resources/images/icons8-thumbs-down-48(red).png');
          //fn_hateProc();
       }
       else{
          $("#hateImg").attr('src', '/resources/images/icons8-thumb-down-48 (Gary).png');
          //fn_hateProc();
       }
    }
    
    //url copy
    function fn_urlCopy(){
       var url = '';
       const textarea = document.createElement("textarea");
       document.body.appendChild(textarea);
       url = window.document.location.href;
       textarea.value = url;
       textarea.select();
       document.execCommand("copy");
       document.body.removeChild(textarea);
       alert("urlì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
    

    
   


   </script>
</body>

</html>